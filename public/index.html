<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>SCOUT ONLINE</title>

<style>
body {
  background:#1b1b1b;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
  margin:0;
  padding:0;
}

#topBar {
  width:100%;
  background:#2d2d2d;
  padding:15px 10px;
  display:flex;
  justify-content:center;
  gap:20px;
  align-items:center;
  font-size:18px;
}

button {
  padding:10px 18px;
  background:#4caf50;
  border:none;
  border-radius:6px;
  color:white;
  font-size:16px;
  cursor:pointer;
}
button:hover {
  background:#45a048;
}

#logoutBtn {
  background:#d9534f;
}
#logoutBtn:hover {
  background:#c9302c;
}

#adminBtn {
  background:#0275d8;
}
#adminBtn:hover {
  background:#025aa5;
}

#contentArea {
  margin-top:80px;
}

#makeRoomBtn {
  font-size:22px;
  padding:12px 30px;
  background:#ff9800;
}
#makeRoomBtn:hover {
  background:#f57c00;
}
</style>

</head>
<body>

<!-- 상단바 (로그인한 유저 정보 + 로그아웃 + 관리자 페이지) -->
<div id="topBar">
  <span id="loginName" style="font-weight:bold;"></span>
  <button id="logoutBtn">로그아웃</button>
  <button id="adminBtn">관리자 권한</button>
</div>

<!-- 메인 콘텐츠 -->
<div id="contentArea">
  <button id="makeRoomBtn">방 만들기</button>
</div>

<!-- START / ROOM / GAME 페이지 (기존 화면) -->
<div id="startPage" style="display:none;"></div>
<div id="roomPage" style="display:none;">
  <h2 id="roomTitle"></h2>
  <div id="playerList"></div>
  <button id="startGameBtn">게임 시작</button>
</div>
<div id="gamePage" style="display:none;">
  <h2 id="roundInfo"></h2>
  <div id="gamePlayerList"></div>
  <div id="tableArea"></div>
  <div id="handArea"></div>
</div>

<!-- 소켓 JS -->
<script src="/socket.io/socket.io.js"></script>
<script src="/socket.js"></script>

<script>
// 로그인된 닉네임 표시
const userId = localStorage.getItem("scout_userId");
if (userId) {
  const nickname = userId.split("-")[0];
  document.getElementById("loginName").innerText = `닉네임: ${nickname}`;
} else {
  // 로그인 안 되어 있으면 login.html 이동
  location.href = "/login.html";
}

// 로그아웃
document.getElementById("logoutBtn").onclick = () => {
  if (confirm("로그아웃 하시겠습니까?")) {
    localStorage.removeItem("scout_userId");
    location.href = "/login.html";
  }
};

// 관리자 페이지로 이동
document.getElementById("adminBtn").onclick = () => {
  location.href = "/admin";
};

// 방 만들기 버튼 → socket.js에서 joinRoom 처리
document.getElementById("makeRoomBtn").onclick = () => {
  makeRoomBtn.click();   // socket.js 내부의 이벤트 트리거
};
</script>

</body>
</html>
