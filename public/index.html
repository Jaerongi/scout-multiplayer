<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />

<!-- ëª¨ë°”ì¼ ì™„ì „ ëŒ€ì‘ -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<title>SCOUT MULTIPLAYER</title>
<link rel="stylesheet" href="style.css" />

</head>
<body>

<!-- START PAGE -->
<div id="startPage" class="page visible">
  <div class="board-panel panel-center" style="padding:25px 15px;">
    <h1 class="game-title">ğŸ´ ìŠ¤ì¹´ìš°íŠ¸ ğŸ´</h1>

    <input id="nicknameInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥" class="input-box">

    <button id="makeRoomBtn" class="btn-main">ë°© ë§Œë“¤ê¸°</button>
    <button id="enterRoomBtn" class="btn-sub">ì´ˆëŒ€ ë§í¬ë¡œ ì…ì¥</button>
  </div>
</div>


<!-- ROOM PAGE -->
<div id="roomPage" class="page">
  <div class="board-panel wide" style="padding:25px 15px;">

    <h2 id="roomTitle" class="title-board"></h2>

    <div id="playerList" class="player-list-board"></div>

    <div class="room-bottom-row">
      <button id="readyBtn" class="btn-main">ê²Œì„ ì¤€ë¹„</button>
      <button id="startGameBtn" class="btn-green" style="display:none;">ê²Œì„ ì‹œì‘</button>
      <button id="copyInviteBtn" class="btn-sub">ì´ˆëŒ€ ë§í¬ ë³µì‚¬</button>
    </div>

  </div>
</div>


<!-- GAME PAGE -->
<div id="gamePage" class="page">

  <h2 id="roundInfo" class="title-board"></h2>

  <div class="game-layout">

    <!-- ì™¼ìª½: í”Œë ˆì´ì–´ ë¦¬ìŠ¤íŠ¸ -->
    <div id="gamePlayerList" class="sideBoard"></div>

    <!-- ì˜¤ë¥¸ìª½: í…Œì´ë¸” + ì†íŒ¨ -->
    <div class="mainBoard">

      <h3 class="section-title">í…Œì´ë¸”</h3>
      <div id="tableArea" class="tableBoard"></div>

      <h3 class="section-title">ë‚´ íŒ¨ (<span id="myCount">0</span>)</h3>

      <!-- FAN LAYOUT -->
      <div id="handArea" class="handBoard"></div>

      <!-- PCìš© ë²„íŠ¼ -->
      <div class="action-row">
        <button id="showBtn" class="btn-main same">SHOW</button>
        <button id="scoutBtn" class="btn-orange same">SCOUT</button>
        <button id="showScoutBtn" class="btn-purple same">SHOW & SCOUT</button>
      </div>

    </div>
  </div>

  <!-- ëª¨ë°”ì¼ í•˜ë‹¨ ë²„íŠ¼ë°” (ID ì™„ì „ ë¶„ë¦¬!!) -->
  <div id="actionBar">
    <button id="mShowBtn">SHOW</button>
    <button id="mScoutBtn">SCOUT</button>
    <button id="mShowScoutBtn">S&S</button>
  </div>

</div>


<!-- =============================== -->
<!--             SCRIPT              -->
<!-- =============================== -->

<!-- socket.io ES module ë²„ì „ ë¡œë“œ -->
<script type="module" src="/socket.io/socket.io.esm.min.js"></script>

<!-- ìš°ë¦¬ì˜ socket.js -->
<script type="module" src="./socket.js"></script>

<script type="module" src="./roomUI.js"></script>
<script type="module" src="./gameUI.js"></script>

<!-- ì´ˆëŒ€ ë§í¬ ìë™ ì…ì¥ -->
<script>
window.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(location.search);
  const invitedRoom = params.get("room");

  if (invitedRoom) {
    const nickname = prompt("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”:");
    if (!nickname) return alert("ë‹‰ë„¤ì„ì´ í•„ìš”í•©ë‹ˆë‹¤!");

    window.roomId = invitedRoom;
    window.myName = nickname;

    window.socket.emit("joinRoom", {
      roomId,
      nickname: myName
    });

    document.getElementById("roomTitle").innerText = `ë°©ë²ˆí˜¸: ${roomId}`;
    window.showPage("roomPage");
  }
});
</script>


<!-- ìŠ¬ë¼ì´ë“œ SCOUT ëª¨ë‹¬ -->
<div id="scoutModal" class="modal hidden">
  <div class="modal-box">
    <p style="margin-bottom:12px;">ì–´ë–»ê²Œ ê°€ì ¸ì˜¬ê¹Œìš”?</p>
    <button id="modalKeep" class="btn-green small">ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ê¸°</button>
    <button id="modalReverse" class="btn-orange small">ë°˜ëŒ€ë¡œ ê°€ì ¸ì˜¤ê¸°</button>
    <br><br>
    <button id="modalClose" class="btn-sub small">ë‹«ê¸°</button>
  </div>
</div>

<!-- INSERT POSITION MODAL -->
<div id="insertModal" class="modal hidden">
  <div class="modal-box" id="insertModalContent"></div>
</div>

</body>
</html>

